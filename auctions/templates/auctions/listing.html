{% extends "auctions/layout.html" %}

{% block body %}

    <!-- This displays the title of the currently selected listing.
    
    The next step is to show all of the information for that particular listing (including the category, 
    which I’m not showing on the home page). I think I also want to show the name of the seller. I can do 
    that by using the seller’s ID, and then printing their name.

    I think it may be better if, instead of creating a button using the <button> tag, I would create a POST form with a 
    “submit” input. I’ll do that since, if I use a <button> tag, I would have to use JavaScript or an <a> tag to do any 
    interaction with that button. And what I really want is getting data using Django and Python. So, a POST form 
    with a “submit” input would be more appropriate.

	And remember that the “Add to Watchlist” button should only appear if the user has logged into their account. So, I will 
    hide that button using django so that it only appears if the user logs in. I need to use the decorator that hides content 
    unless the user logs in.

    -->
    {% for listing_data in current_listing %}
        <h2>{{listing_data.product_name}}</h2>

        <p>   <!-- Price -->
            <b>Price:</b> ${{listing_data.initial_price}}
        </p>



        <p> <!-- Description -->
            {{listing_data.description}}
        </p>

        {% if user.is_authenticated %}
            {%  if display_remove_button == True %}
                <!-- "Remove from Watchlist" button -->
                <form method="post">
                    {% csrf_token %}
                    <input type="text" name="add_or_remove" value="remove">
                    <input type="submit" value="Remove from Watchlist">
                </form>
            {% else %}
                <!-- "Add to Watchlist" button -->
                <form method="post">
                    {% csrf_token %}
                    <input type="text" name="add_or_remove" value="add">
                    <input type="submit" value="Add to Watchlist">
                </form>
            {% endif %}

            <!-- DEBUGGING MESSAGE -->
            {% for product in watchlist_array %}
                {{product}}
                <br>
                {% if product == current_listing_id %}
                    <p>They are the same number!</p>
                {% endif %}
            {% endfor %}
            <br>
            {{current_listing_id}}

        {% endif %}



        <p> <!-- Date when the listing was created -->
            <small class="text-muted">Created on: {{listing_data.created_on}}</small>
        </p>
        <p> <!-- Category -->
            {{listing_data.category}}
        </p>
        
        <!-- This will print the seller's name by comparing the IDs of all of the users, and the seller ID from the
        current listing -->
        {% for seller_data in seller %}
            {% if seller_data.id == listing_data.seller_id_id %}
                <p> <!-- Seller's name -->
                    Seller: {{seller_data.username}}
                </p>
            {%endif%}
        {% endfor %}

        <!-- Listing image -->
        <img src="{{listing_data.picture_url}}" width="500rem" alt="{{listing_data.product_name}}'s picture">
    {% endfor %}

    <!-- I need to FIX the URL later, since I haven't created the view which will display an individual listing.

    In fact, for the time being, it doesn't make sense to use a form here, since I'm only displaying the listing's
    information, not giving the user the option to edit it.

    To display the information on the page, I won’t use forms (for the time being), and I won’t use Bootstrap cards.
    I will use the entirety of the size of the browser. I’ll probably user a hero though.
    -->


{% endblock %}